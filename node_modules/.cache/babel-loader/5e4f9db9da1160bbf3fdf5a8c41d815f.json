{"ast":null,"code":"import { PublicClientApplication } from '@azure/msal-browser';\nimport { APP_ID, REDIRECT_URI, SCOPES } from '../config/environment';\nconst MSAL_CONFIG = {\n  auth: {\n    clientId: APP_ID,\n    redirectUri: REDIRECT_URI,\n    postLogoutRedirectUri: REDIRECT_URI\n  }\n};\nexport const azureProvider = new PublicClientApplication(MSAL_CONFIG);\nexport const scopeRequestConfig = {\n  scopes: SCOPES.split(',')\n};\nexport const getAccessToken = async () => {\n  try {\n    const interactiveResult = await azureProvider.loginRedirect(scopeRequestConfig); // const allAccounts = await azureProvider.getAllAccounts();\n\n    return {\n      token: interactiveResult.accessToken,\n      user: ''\n    };\n  } catch (e) {\n    console.log('error', e);\n    return e;\n  }\n};\n\nconst isInteractionNeeded = error => {\n  if (!error.message || error.message.length <= 0) {\n    return false;\n  }\n\n  return error.message.indexOf('consent_required') > -1 || error.message.indexOf('interaction_required') > -1 || error.message.indexOf('login_required') > -1 || error.message.indexOf('no_account_in_silent_request') > -1;\n};","map":{"version":3,"sources":["/Users/rubenbernardes/Code/freelance/volvo/azure-context/src/utils/security.util.js"],"names":["PublicClientApplication","APP_ID","REDIRECT_URI","SCOPES","MSAL_CONFIG","auth","clientId","redirectUri","postLogoutRedirectUri","azureProvider","scopeRequestConfig","scopes","split","getAccessToken","interactiveResult","loginRedirect","token","accessToken","user","e","console","log","isInteractionNeeded","error","message","length","indexOf"],"mappings":"AAAA,SAASA,uBAAT,QAAwC,qBAAxC;AACA,SAASC,MAAT,EAAiBC,YAAjB,EAA+BC,MAA/B,QAA6C,uBAA7C;AAEA,MAAMC,WAAW,GAAG;AAClBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAEL,MADN;AAEJM,IAAAA,WAAW,EAAEL,YAFT;AAGJM,IAAAA,qBAAqB,EAAEN;AAHnB;AADY,CAApB;AAQA,OAAO,MAAMO,aAAa,GAAG,IAAIT,uBAAJ,CAA4BI,WAA5B,CAAtB;AACP,OAAO,MAAMM,kBAAkB,GAAG;AAChCC,EAAAA,MAAM,EAAER,MAAM,CAACS,KAAP,CAAa,GAAb;AADwB,CAA3B;AAIP,OAAO,MAAMC,cAAc,GAAG,YAAY;AACxC,MAAI;AACF,UAAMC,iBAAiB,GAAG,MAAML,aAAa,CAACM,aAAd,CAA4BL,kBAA5B,CAAhC,CADE,CAEF;;AAEA,WAAO;AACLM,MAAAA,KAAK,EAAEF,iBAAiB,CAACG,WADpB;AAELC,MAAAA,IAAI,EAAE;AAFD,KAAP;AAID,GARD,CAQE,OAAOC,CAAP,EAAU;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,CAArB;AACA,WAAOA,CAAP;AACD;AACF,CAbM;;AAeP,MAAMG,mBAAmB,GAAIC,KAAD,IAAW;AACrC,MAAI,CAACA,KAAK,CAACC,OAAP,IAAkBD,KAAK,CAACC,OAAN,CAAcC,MAAd,IAAwB,CAA9C,EAAiD;AAC/C,WAAO,KAAP;AACD;;AAED,SACEF,KAAK,CAACC,OAAN,CAAcE,OAAd,CAAsB,kBAAtB,IAA4C,CAAC,CAA7C,IACAH,KAAK,CAACC,OAAN,CAAcE,OAAd,CAAsB,sBAAtB,IAAgD,CAAC,CADjD,IAEAH,KAAK,CAACC,OAAN,CAAcE,OAAd,CAAsB,gBAAtB,IAA0C,CAAC,CAF3C,IAGAH,KAAK,CAACC,OAAN,CAAcE,OAAd,CAAsB,8BAAtB,IAAwD,CAAC,CAJ3D;AAMD,CAXD","sourcesContent":["import { PublicClientApplication } from '@azure/msal-browser';\nimport { APP_ID, REDIRECT_URI, SCOPES } from '../config/environment';\n\nconst MSAL_CONFIG = {\n  auth: {\n    clientId: APP_ID,\n    redirectUri: REDIRECT_URI,\n    postLogoutRedirectUri: REDIRECT_URI,\n  },\n};\n\nexport const azureProvider = new PublicClientApplication(MSAL_CONFIG);\nexport const scopeRequestConfig = {\n  scopes: SCOPES.split(',')\n};\n\nexport const getAccessToken = async () => {\n  try {\n    const interactiveResult = await azureProvider.loginRedirect(scopeRequestConfig);\n    // const allAccounts = await azureProvider.getAllAccounts();\n\n    return {\n      token: interactiveResult.accessToken,\n      user: ''\n    }\n  } catch (e) {\n    console.log('error', e);\n    return e\n  }\n};\n\nconst isInteractionNeeded = (error) => {\n  if (!error.message || error.message.length <= 0) {\n    return false;\n  }\n\n  return (\n    error.message.indexOf('consent_required') > -1 ||\n    error.message.indexOf('interaction_required') > -1 ||\n    error.message.indexOf('login_required') > -1 ||\n    error.message.indexOf('no_account_in_silent_request') > -1\n  );\n};\n"]},"metadata":{},"sourceType":"module"}