{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { PERMISSIONS } from '../consts/permissions.consts';\nexport const userHasPermission = (permissionToCheck, role) => {\n  const permissionsArray = Object.values(PERMISSIONS); // simple permissions check in level of hierarchy\n\n  const userRoleIndex = permissionsArray.indexOf(role);\n  console.log(permissionToCheck); // const permissionToCheckIndex = permissionsArray.indexOf(permissionToCheck?.toUpperCase());\n  //\n  // return userRoleIndex <= permissionToCheckIndex;\n};\nexport const usePrivateRoute = (permissionToCheck, role) => {\n  _s();\n\n  const history = useHistory();\n  useEffect(() => {\n    console.log('hecking this');\n\n    if (!role) {\n      history.push('/');\n    }\n\n    if (role && permissionToCheck) {\n      !userHasPermission(permissionToCheck, role) && history.push('/');\n    }\n  }, [permissionToCheck, role]);\n};\n\n_s(usePrivateRoute, \"bz2N+u0mX89LO9zOCfVCA9Sa20M=\", false, function () {\n  return [useHistory];\n});","map":{"version":3,"sources":["/Users/rubenbernardes/Code/freelance/volvo/azure-context/src/utils/useUserHasPermission.util.js"],"names":["useEffect","useHistory","PERMISSIONS","userHasPermission","permissionToCheck","role","permissionsArray","Object","values","userRoleIndex","indexOf","console","log","usePrivateRoute","history","push"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,WAAT,QAA4B,8BAA5B;AAEA,OAAO,MAAMC,iBAAiB,GAAG,CAACC,iBAAD,EAAoBC,IAApB,KAA6B;AAE5D,QAAMC,gBAAgB,GAAGC,MAAM,CAACC,MAAP,CAAcN,WAAd,CAAzB,CAF4D,CAI5D;;AACE,QAAMO,aAAa,GAAGH,gBAAgB,CAACI,OAAjB,CAAyBL,IAAzB,CAAtB;AACFM,EAAAA,OAAO,CAACC,GAAR,CAAYR,iBAAZ,EAN4D,CAO1D;AACA;AACA;AACH,CAVM;AAYP,OAAO,MAAMS,eAAe,GAAG,CAACT,iBAAD,EAAoBC,IAApB,KAA6B;AAAA;;AAC1D,QAAMS,OAAO,GAAGb,UAAU,EAA1B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;;AACA,QAAI,CAACP,IAAL,EAAW;AACTS,MAAAA,OAAO,CAACC,IAAR,CAAa,GAAb;AACD;;AACD,QAAIV,IAAI,IAAID,iBAAZ,EAA+B;AAC7B,OAACD,iBAAiB,CAACC,iBAAD,EAAoBC,IAApB,CAAlB,IAA+CS,OAAO,CAACC,IAAR,CAAa,GAAb,CAA/C;AACD;AACF,GARQ,EAQN,CAACX,iBAAD,EAAoBC,IAApB,CARM,CAAT;AASD,CAZM;;GAAMQ,e;UACKZ,U","sourcesContent":["import { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { PERMISSIONS } from '../consts/permissions.consts';\n\nexport const userHasPermission = (permissionToCheck, role) => {\n\n  const permissionsArray = Object.values(PERMISSIONS);\n\n  // simple permissions check in level of hierarchy\n    const userRoleIndex = permissionsArray.indexOf(role);\n  console.log(permissionToCheck);\n    // const permissionToCheckIndex = permissionsArray.indexOf(permissionToCheck?.toUpperCase());\n    //\n    // return userRoleIndex <= permissionToCheckIndex;\n};\n\nexport const usePrivateRoute = (permissionToCheck, role) => {\n  const history = useHistory();\n\n  useEffect(() => {\n    console.log('hecking this');\n    if (!role) {\n      history.push('/')\n    }\n    if (role && permissionToCheck) {\n      !userHasPermission(permissionToCheck, role) && history.push('/')\n    }\n  }, [permissionToCheck, role])\n}"]},"metadata":{},"sourceType":"module"}