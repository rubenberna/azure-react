{"ast":null,"code":"import createDataContext from './createDataContext';\nimport { getUserProfile, azureProvider, scopeRequestConfig, getAccessToken } from '../utils/security.util';\nconst TYPES = {\n  ADD_ERROR: 'auth/add_error',\n  LOGIN: 'auth/login',\n  SIGN_OUT: 'auth/signOut',\n  CLEAR_ERROR: 'auth/clearError'\n};\n\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case TYPES.ADD_ERROR:\n      return { ...state,\n        errorMessage: action.payload\n      };\n\n    case TYPES.LOGIN:\n      return {\n        isAuthenticated: true,\n        errorMessage: '',\n        token: action.payload\n      };\n\n    case TYPES.CLEAR_ERROR:\n      return { ...state,\n        errorMessage: ''\n      };\n\n    case TYPES.SIGN_OUT:\n      return {\n        isAuthenticated: false,\n        token: null,\n        errorMessage: \"\"\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst signIn = dispatch => async () => {\n  const accounts = await azureProvider.getAllAccounts();\n\n  if (accounts === null || accounts === void 0 ? void 0 : accounts.length) {\n    console.log('gett');\n    const firstTimeRefresh = getAccessToken({\n      scopes: scopeRequestConfig,\n      account: accounts[0]\n    });\n    console.log(firstTimeRefresh);\n  } // const profile = await getUserProfile()\n  // console.log(profile);\n\n};\n\nexport const {\n  Provider,\n  Context\n} = createDataContext(authReducer, {\n  signIn\n}, {\n  isAuthenticated: false,\n  token: null,\n  errorMessage: ''\n});","map":{"version":3,"sources":["/Users/rubenbernardes/Code/freelance/volvo/azure-context/src/context/AuthContext.js"],"names":["createDataContext","getUserProfile","azureProvider","scopeRequestConfig","getAccessToken","TYPES","ADD_ERROR","LOGIN","SIGN_OUT","CLEAR_ERROR","authReducer","state","action","type","errorMessage","payload","isAuthenticated","token","signIn","dispatch","accounts","getAllAccounts","length","console","log","firstTimeRefresh","scopes","account","Provider","Context"],"mappings":"AAAA,OAAOA,iBAAP,MAA8B,qBAA9B;AACA,SAASC,cAAT,EAAyBC,aAAzB,EAAwCC,kBAAxC,EAA4DC,cAA5D,QAAkF,wBAAlF;AAEA,MAAMC,KAAK,GAAG;AACZC,EAAAA,SAAS,EAAE,gBADC;AAEZC,EAAAA,KAAK,EAAE,YAFK;AAGZC,EAAAA,QAAQ,EAAE,cAHE;AAIZC,EAAAA,WAAW,EAAE;AAJD,CAAd;;AAOA,MAAMC,WAAW,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACrC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKR,KAAK,CAACC,SAAX;AACE,aAAO,EAAC,GAAGK,KAAJ;AAAWG,QAAAA,YAAY,EAAEF,MAAM,CAACG;AAAhC,OAAP;;AACF,SAAKV,KAAK,CAACE,KAAX;AACE,aAAO;AAACS,QAAAA,eAAe,EAAE,IAAlB;AAAwBF,QAAAA,YAAY,EAAE,EAAtC;AAA0CG,QAAAA,KAAK,EAAEL,MAAM,CAACG;AAAxD,OAAP;;AACF,SAAKV,KAAK,CAACI,WAAX;AACE,aAAO,EAAC,GAAGE,KAAJ;AAAWG,QAAAA,YAAY,EAAE;AAAzB,OAAP;;AACF,SAAKT,KAAK,CAACG,QAAX;AACE,aAAO;AAACQ,QAAAA,eAAe,EAAE,KAAlB;AAAyBC,QAAAA,KAAK,EAAE,IAAhC;AAAsCH,QAAAA,YAAY,EAAE;AAApD,OAAP;;AACF;AACE,aAAOH,KAAP;AAVJ;AAYD,CAbD;;AAeA,MAAMO,MAAM,GAAKC,QAAF,IAAgB,YAAY;AACzC,QAAMC,QAAQ,GAAG,MAAMlB,aAAa,CAACmB,cAAd,EAAvB;;AACA,MAAID,QAAJ,aAAIA,QAAJ,uBAAIA,QAAQ,CAAEE,MAAd,EAAsB;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,UAAMC,gBAAgB,GAAGrB,cAAc,CAAC;AACtCsB,MAAAA,MAAM,EAAEvB,kBAD8B;AAEtCwB,MAAAA,OAAO,EAAEP,QAAQ,CAAC,CAAD;AAFqB,KAAD,CAAvC;AAKAG,IAAAA,OAAO,CAACC,GAAR,CAAYC,gBAAZ;AACD,GAVwC,CAYzC;AACA;;AACD,CAdD;;AAgBA,OAAO,MAAM;AAACG,EAAAA,QAAD;AAAWC,EAAAA;AAAX,IAAsB7B,iBAAiB,CAClDU,WADkD,EAElD;AAACQ,EAAAA;AAAD,CAFkD,EAGlD;AAACF,EAAAA,eAAe,EAAE,KAAlB;AAAyBC,EAAAA,KAAK,EAAE,IAAhC;AAAsCH,EAAAA,YAAY,EAAE;AAApD,CAHkD,CAA7C","sourcesContent":["import createDataContext from './createDataContext';\nimport { getUserProfile, azureProvider, scopeRequestConfig, getAccessToken } from '../utils/security.util';\n\nconst TYPES = {\n  ADD_ERROR: 'auth/add_error',\n  LOGIN: 'auth/login',\n  SIGN_OUT: 'auth/signOut',\n  CLEAR_ERROR: 'auth/clearError',\n}\n\nconst authReducer = (state, action) => {\n  switch (action.type) {\n    case TYPES.ADD_ERROR:\n      return {...state, errorMessage: action.payload};\n    case TYPES.LOGIN:\n      return {isAuthenticated: true, errorMessage: '', token: action.payload};\n    case TYPES.CLEAR_ERROR:\n      return {...state, errorMessage: ''};\n    case TYPES.SIGN_OUT:\n      return {isAuthenticated: false, token: null, errorMessage: \"\"};\n    default:\n      return state;\n  }\n};\n\nconst signIn = ( dispatch ) => async () => {\n  const accounts = await azureProvider.getAllAccounts()\n  if (accounts?.length) {\n    console.log('gett');\n    const firstTimeRefresh = getAccessToken({\n      scopes: scopeRequestConfig,\n      account: accounts[0]\n    })\n\n    console.log(firstTimeRefresh);\n  }\n\n  // const profile = await getUserProfile()\n  // console.log(profile);\n};\n\nexport const {Provider, Context} = createDataContext(\n  authReducer,\n  {signIn},\n  {isAuthenticated: false, token: null, errorMessage: ''}\n);\n"]},"metadata":{},"sourceType":"module"}